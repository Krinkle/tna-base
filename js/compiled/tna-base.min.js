$.customEventer=function(passedObject){var elementIdOrClass=passedObject.elementIdOrClass,eventToWatch=passedObject.eventToWatch,customEventToTrigger=passedObject.customEventToTrigger;$(document).on(eventToWatch,elementIdOrClass,function(){$(document).trigger(customEventToTrigger)})},$.toggleDisplayOfElement=function(toggler,togglee){$(togglee).toggle(),$(toggler).toggleClass("expanded")};var customizeTweetMedia=function(){jQuery(".entry-content").find(".twitter-timeline").contents().find(".timeline-Tweet-text").css("font-size","1.148em","line-height","1.6em"),jQuery(".entry-content").find(".twitter-timeline").contents().find(".timeline-Tweet-text").css("line-height","1.58em"),jQuery(".entry-content").find(".twitter-timeline").contents().find("h1").css("font-size","1.45em")};jQuery(".entry-content").delegate("#twitter-widget-0","DOMSubtreeModified propertychange",function(){customizeTweetMedia()}),$.fn.mega_menu_enhancements=function(){return $("#mega-menu-pull-down, #mega-menu-mobile").each(function(){$(this).on("click",function(){$("#nav").slideToggle("fast")})}),$(document).on("click",".toggle-sub-menu",function(e){if($(window).width()<480){var $this=$(this);e.preventDefault(),$this.toggleClass("expanded").next().slideToggle("fast")}}),$('.mega-menu a[href="#"]').each(function(){var $this=$(this),text=$this.text();$this.replaceWith($("<div>",{text:text,class:"toggle-sub-menu",id:"more-link"}))}),this.each(function(){var $link,$li,$this=$(this),$items=$this.next();$this.addClass("toggle-sub-menu"),$link=$("<a>",{href:$this.attr("href"),text:$this.text()+" home"}),$li=$('<li class="mobile-home-link">').append($link),$li.prependTo($items)})},$.fn.append_promotional_image=function(){return this.each(function(){$(this).append('<li class="imgContent"><a href="https://www.nationalarchives.gov.uk/about/visit-us/whats-on/with-love/" title="With Love"><img src="//www.nationalarchives.gov.uk/images/home/menu-with-love.jpg" alt="With Love" class="img-responsive tna-img-responsive"></a></li>')})},function($){$.fn.add_attributes_to_target_blank=function(){return this.each(function(){var $this=$(this);"_blank"===$this.attr("target")&&$this.attr("rel","noopener noreferrer")})}}(jQuery),tnaSetThisCookie=function(name,days){var d=new Date;d.setTime(d.getTime()+864e5*days),document.cookie=name+"=true;path=/;expires="+d.toGMTString()+";"},tnaCheckForThisCookie=function(name){return-1!==document.cookie.indexOf(name)},$(document).ready(function(){$(function(){$("#mega-menu-pull-down").show(),tnaCheckForThisCookie("dontShowCookieNotice")||($('<div class="cookieNotice">We use cookies to improve services and ensure they work for you. Read our <a title="Our cookie policy" href="https://www.nationalarchives.gov.uk/legal/cookies.htm">cookie policy</a>. <a title="Close cookie policy notice" href="#" id="cookieCutter">Close</a></div>').css({padding:"5px","text-align":"center",backgroundColor:"#FCE45C",position:"fixed",bottom:0,"font-size":"14px",width:"100%",display:"none"}).appendTo("body"),setTimeout(function(){$(".cookieNotice").slideDown(1e3)},1e3))}),$(document).on("click","#cookieCutter",function(e){e.preventDefault(),tnaSetThisCookie("dontShowCookieNotice",365),$(".cookieNotice").hide()})}),$(document).ready(function(){$("#search-field-wrapper ul").hide(),$.showExpander=function(){$(".expander").length&&$(".expander").delay(200).slideDown(400)},$(".formDestinationChanger").on("click",function(){var placeholder=$(this).attr("data-placeholder"),target=$(this).attr("data-target"),fieldName=$(this).attr("data-fieldName");$.toggleDisplayOfElement("#scope-selector","#search-field-wrapper ul"),$("#tnaSearch").attr({placeholder:placeholder,name:fieldName}),$("#globalSearch").attr("action",target)}),$("#scope-selector").click(function(){$("#search-field-wrapper ul").toggle(),0!=$("#search-field-wrapper ul:visible").size()?$(this).addClass("expanded"):$(this).removeClass("expanded")}),$(document).on("click","#search-controls li",function(e){$("#search-controls li").removeClass("selected"),$(e.target).addClass("selected")}),$(document).one("toggleSearchOptionsOnce",function(){$.toggleDisplayOfElement("#scope-selector","#search-field-wrapper ul")}),$(document).on("toggleSearchOptions",function(){$.toggleDisplayOfElement("#scope-selector","#search-field-wrapper ul"),$(document).off("toggleSearchOptionsOnce")}),$(document).on("change",".mobileSearchDestinationOption",function(){var target=$(this).attr("data-target"),placeholder=$(this).attr("data-placeholder"),fieldName=$(this).attr("data-fieldName");$("#mobile-search-field").attr({placeholder:placeholder,name:fieldName}).focus(),$("#mobileGlobalSearch").attr("action",target)}),$("#mobileGlobalSearch").css("display","none"),$(".search-expander").click(function(){$("#mobileGlobalSearch").slideToggle("fast")}),$("button.search-expander").on("click",function(){$(this).toggleClass("search-close")}),$("input:radio[name=radioSearchGroup]").change(function(){"search_website"==this.value?($("form").attr("action","https://www.nationalarchives.gov.uk/search/search_results.aspx"),$('#mobileGlobalSearch input[name="_q"]').attr("name","QueryText"),$('input[name="QueryText"]').attr("placeholder","Search our website...")):"search_records"==this.value&&($("form").attr("action","https://discovery.nationalarchives.gov.uk/SearchUI/s/res"),$('#mobileGlobalSearch input[name="QueryText"]').attr("name","_q"),$('input[name="_q"]').attr("placeholder","Search our records..."))})}),$(document).ready(function(){if($(".image_caption_back").length)try{var $imageCaption=$(".image_caption_back"),ariaExpanded=$.parseJSON($(".eye_caption").attr("aria-expanded").toLowerCase()),ariaHidden=$.parseJSON($imageCaption.attr("aria-hidden").toLowerCase());$(".eye_caption").on("click",function(){$imageCaption.toggle(),ariaHidden=!ariaHidden,ariaExpanded=!ariaExpanded,$imageCaption.attr("aria-hidden",ariaHidden),$(this).attr("aria-expanded",ariaExpanded)})}catch(e){return!1}}),$(function(){$('a[class="anchor-link"]').on("click",function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var target=$(this.hash);if(target=target.length?target:$("[name="+this.hash.slice(1)+"]"),target.length)return $("html, body").animate({scrollTop:target.offset().top},500),!1}})}),$('a[target="_blank"]').add_attributes_to_target_blank(),$("ul.sub-menu:last").append_promotional_image(),$(".mega-menu > ul > li > a").mega_menu_enhancements();